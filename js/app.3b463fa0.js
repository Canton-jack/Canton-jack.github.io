(function(e){function t(t){for(var r,i,s=t[0],c=t[1],u=t[2],l=0,g=[];l<s.length;l++)i=s[l],Object.prototype.hasOwnProperty.call(n,i)&&n[i]&&g.push(n[i][0]),n[i]=0;for(r in c)Object.prototype.hasOwnProperty.call(c,r)&&(e[r]=c[r]);d&&d(t);while(g.length)g.shift()();return a.push.apply(a,u||[]),o()}function o(){for(var e,t=0;t<a.length;t++){for(var o=a[t],r=!0,i=1;i<o.length;i++){var c=o[i];0!==n[c]&&(r=!1)}r&&(a.splice(t--,1),e=s(s.s=o[0]))}return e}var r={},n={app:0},a=[];function i(e){return s.p+"js/"+({about:"about"}[e]||e)+"."+{about:"fe95df1d"}[e]+".js"}function s(t){if(r[t])return r[t].exports;var o=r[t]={i:t,l:!1,exports:{}};return e[t].call(o.exports,o,o.exports,s),o.l=!0,o.exports}s.e=function(e){var t=[],o=n[e];if(0!==o)if(o)t.push(o[2]);else{var r=new Promise((function(t,r){o=n[e]=[t,r]}));t.push(o[2]=r);var a,c=document.createElement("script");c.charset="utf-8",c.timeout=120,s.nc&&c.setAttribute("nonce",s.nc),c.src=i(e);var u=new Error;a=function(t){c.onerror=c.onload=null,clearTimeout(l);var o=n[e];if(0!==o){if(o){var r=t&&("load"===t.type?"missing":t.type),a=t&&t.target&&t.target.src;u.message="Loading chunk "+e+" failed.\n("+r+": "+a+")",u.name="ChunkLoadError",u.type=r,u.request=a,o[1](u)}n[e]=void 0}};var l=setTimeout((function(){a({type:"timeout",target:c})}),12e4);c.onerror=c.onload=a,document.head.appendChild(c)}return Promise.all(t)},s.m=e,s.c=r,s.d=function(e,t,o){s.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:o})},s.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},s.t=function(e,t){if(1&t&&(e=s(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var o=Object.create(null);if(s.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)s.d(o,r,function(t){return e[t]}.bind(null,r));return o},s.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return s.d(t,"a",t),t},s.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},s.p="/",s.oe=function(e){throw console.error(e),e};var c=window["webpackJsonp"]=window["webpackJsonp"]||[],u=c.push.bind(c);c.push=t,c=c.slice();for(var l=0;l<c.length;l++)t(c[l]);var d=u;a.push([0,"chunk-vendors"]),o()})({0:function(e,t,o){e.exports=o("cd49")},"4e1a":function(e,t,o){},"5c0b":function(e,t,o){"use strict";o("9c0c")},"9c0c":function(e,t,o){},a581:function(e,t,o){},cd49:function(e,t,o){"use strict";o.r(t);o("e260"),o("e6cf"),o("cca6"),o("a79d");var r=o("2b0e"),n=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{attrs:{id:"app"}},[o("div",{attrs:{id:"nav"}},[o("router-link",{attrs:{to:"/"}},[e._v("Home")])],1),o("router-view")],1)},a=[],i=(o("5c0b"),o("2877")),s={},c=Object(i["a"])(s,n,a,!1,null,null,null),u=c.exports,l=o("9483");Object(l["a"])("".concat("/","service-worker.js"),{ready:function(){console.log("App is being served from cache by a service worker.\nFor more details, visit https://goo.gl/AFskqB")},registered:function(){console.log("Service worker has been registered.")},cached:function(){console.log("Content has been cached for offline use.")},updatefound:function(){console.log("New content is downloading.")},updated:function(){console.log("New content is available; please refresh.")},offline:function(){console.log("No internet connection found. App is running in offline mode.")},error:function(e){console.error("Error during service worker registration:",e)}});o("d3b7"),o("3ca3"),o("ddb0");var d,g,p,f,h=o("8c4f"),v=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{staticClass:"home"},[o("h5",[e._v("点击地图获取坐标")]),o("h5",[e._v(e._s(e.lnglatArr))]),o("div",{staticClass:"btn-wrap"},[o("button",{on:{click:e.createLine}},[e._v("生成轨迹")]),o("button",{on:{click:e.startDrive}},[e._v("开始运动")]),o("button",{on:{click:e.reset}},[e._v("重置")])]),o("div",{attrs:{id:"map"}})])},m=[],y=(o("b680"),o("99af"),o("595b")),A=o("e192"),b=o.n(A),F=[],L=!1,S=!1,E=0,w=100,j=6,O=100,k="ticket109000",x="金龙客车",D="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAwCAYAAABXAvmHAAAACXBIWXMAAAsTAAALEwEAmpwYAAAEV0lEQVRoge2Zz0syXRTHv/nj8UeKDDqitog2Foht8z+IiGwh1EraBC1qV4uIXLWR1rlwV7geEFtE2B+QtFNyEVS0SEVHJhNHx8l6Fy8Oao06M/qGL88HBmbuPefO+d4754xznXp8fPzCBKP67QCUopHjxLIscrkccrkcCoUCKpUKqtUqqtUqWJYFz/PgeR4fHx//3kSjgVarhVarhdFohNlshtlshsVigdPphMvlgsvlgsFgGL2A9/d3pNNp5HI55PN5vL6+olKpSLpJs9lEs9kEALy9vYnaEQQhiJmZmYHX64XJZOo79lS/HLi6usLl5SVarZakgEeFWq3G2toaVlZWRG1EcyCVSiEej/9a8ADQarUQj8eRSqVEbUQfoWQyKeqkVqvhcDiE5SYIAgaD4duh1+sBAI1GA/V6/dvBMExXLolN1s3NDZaWlqQJyOVyXdd+v19IOLvdDpVq+AJmMpkGPsufn58oFotCriUSCdFYOhEV0Dsbq6urwnmj0UCpVEKxWESpVEKpVEK5XEa9XgfHcWg0GuA4DhzHAQB0Oh10Oh30ej10Oh0MBgOsVitIkgRJkrDb7SBJEg6HAw6HAwC6BLSrmSQBYkQiEaTTaUk+LMuCZdmBdouLi9jd3ZU0tubs7AyZTGZoh3bws7OzsNlssNlssFqtsNlsMJvNwmz/+fMHOp0OAMBxHJrNprAq1WoVNE2jXC6DpmnQNI2Xl5e+E7Ozs/Otzev1QiMl+E6Ojo6GtjUajTAajX1tfgpwEJlM5nsZjUajiEajkgcbN2JxTfxvob8Cfpu/AnrheR40TY/MbhCyvgfEeH5+xvn5OQDg+PgYWq1Wkd0wqLxer3DReS4FnudBURROT09RKBQwNTX14zfDsHb96I1Xs7e3JyvoNk9PT7i4uEChUIBKpcLy8jL8fj80Go0su0H0xiv7EeJ5HolEAslkEl9fX3A6ndja2sLc3JwsO7nIFtA7E/l8HuFweKDfsHbDIrkKyc2TcY0teQWU5syomfgXmawcYBgGFEXh4eEBAOB2uxEIBEAQxH/i34lkAQzD4OTkBLVaTWi7u7tDNptFKBQaGIRS/14kP0IURaFWq8Hj8SAcDiMcDsPj8aBWq4GiqLH7KxbQXvZgMAiCIEAQBILBYFffOP17mfgklizA7XYDAGKxGBiGAcMwiMViXX3j9O9FchIHAgFks1nc39/j8PBQaJ+enkYgEBi7fy+SBRAEgVAoJLsMKvXvRdZ7gCAIbG9vy3EdiX8nE5/EoitgNBq7tgPlbDyNin6bYqIrMD8/P5Zg5LCwsCDaJypgc3MTNpttLAFJgSRJbGxsiPaLCiAIAgcHB2MJSgr7+/t9q1PfKtTp2Lsv2c4JpfuoYuO02weV1omvQv9/ARaLBQC6/nxon7f7lKB0/IFvYp/Ph+vra0QikR/7lKJ0/IEC1tfXAQC3t7fCLprFYoHP5xP6lKB0/L7/1E8CE5/E/wCECzwBWskMHgAAAABJRU5ErkJggg==",M=0,B=1e3,C={type:"FeatureCollection",features:[{type:"Feature",properties:{bearing:0},geometry:{type:"Point",coordinates:[]}}]},H={type:"FeatureCollection",features:[{type:"Feature",geometry:{type:"LineString",coordinates:[]}}]},P={type:"FeatureCollection",features:[{type:"Feature",geometry:{type:"LineString",coordinates:[]}}]},R=r["a"].extend({name:"Home",components:{},data:function(){return{lnglatArr:F,drivingFlag:L,lineFlag:S,totalDistance:E,counter:M,steps:B,fuelVol:O}},methods:{init:function(){var e=this;d=new b.a.Map({container:"map",style:"mapbox://styles/mapbox/streets-v11",center:[116.13781,23.56752],zoom:9,minZoom:8}),d.on("load",(function(){console.info("1");var e=new Image(20,20);e.src=D,d.addImage("custom-bus",e)})),d.on("click",(function(t){console.info(JSON.stringify(t.lngLat)),e.drivingFlag||e.lineFlag||e.lnglatArr.push([t.lngLat.lng,t.lngLat.lat])})),p=new b.a.Popup({className:"my-popup"}).setMaxWidth("300px")},createLine:function(){if(!this.drivingFlag&&!this.lineFlag)if(1!==this.lnglatArr.length){this.lineFlag=!0,C.features[0].geometry.coordinates=this.lnglatArr[0],H.features[0].geometry.coordinates=this.lnglatArr,this.totalDistance=parseFloat(Object(y["length"])(H.features[0]).toFixed(2)),g=parseFloat((this.totalDistance/w).toFixed(2)),console.info("总距离/km",this.totalDistance),console.info("总时间/h",g);for(var e=[],t=0;t<this.totalDistance;t+=this.totalDistance/this.steps){var o=Object(y["along"])(H.features[0],t);e.push(o.geometry.coordinates)}H.features[0].geometry.coordinates=e,d.getSource("pointSource")?d.getSource("pointSource").setData(C):d.addSource("pointSource",{type:"geojson",data:C}),d.getSource("routeSource")?d.getSource("routeSource").setData(H):d.addSource("routeSource",{type:"geojson",data:H,lineMetrics:!0}),d.getSource("drivedRouteSource")?d.getSource("drivedRouteSource").setData(P):d.addSource("drivedRouteSource",{type:"geojson",data:P,lineMetrics:!0}),this.addRouterLayer(),this.addDrivedRouteLayer();var r="<ul><li>汽车车票:".concat(k,"</li><li>汽车型号:").concat(x,"</li><li>汽车颜色:蓝色</li><li>剩余油量:100</li><li>距离终点距离:").concat(this.totalDistance,"km</li><li>距离终点时间:").concat(g,"h</li></ul>");p.setHTML(r),f&&f.remove();var n=document.createElement("img");n.src=D,n.style.width="20px",n.style.height="20px",f=new b.a.Marker({element:n}).setLngLat(C.features[0].geometry.coordinates).setPopup(p).addTo(d)}else alert("请至少选择2个坐标")},startDrive:function(){!this.drivingFlag&&this.lineFlag&&(console.info("driving"),this.drivingFlag=!0,this.animate())},addRouterLayer:function(){d.addLayer({id:"routeLayer",type:"line",source:"routeSource",paint:{"line-width":5,"line-opacity":1,"line-color":"#009EFF"}})},addDrivedRouteLayer:function(){d.addLayer({id:"drivedLayer",type:"line",source:"drivedRouteSource",paint:{"line-width":5,"line-opacity":1,"line-color":"#FF9900"}})},animate:function(){var e=H.features[0].geometry.coordinates[this.counter>=this.steps?this.counter-1:this.counter],t=H.features[0].geometry.coordinates[this.counter>=B?this.counter:this.counter+1];if(e&&t){var o=Object(y["point"])(H.features[0].geometry.coordinates[0]),r=Object(y["point"])(H.features[0].geometry.coordinates[this.counter]),n=Object(y["distance"])(o,r),a=parseFloat((n/100).toFixed(2)),i=g-a,s=parseFloat((100-n/100*j).toFixed(2)),c=Math.round(parseFloat((this.totalDistance-n).toFixed(2)));C.features[0].geometry.coordinates=H.features[0].geometry.coordinates[this.counter],P.features[0].geometry.coordinates.push(C.features[0].geometry.coordinates);var u="<ul><li>汽车车票:".concat(k,"</li><li>汽车型号:").concat(x,"</li><li>汽车颜色:蓝色</li><li>剩余油量:").concat(s,"</li><li>距离终点距离:").concat(c,"km</li><li>距离终点时间:").concat(i,"h</li></ul>");p.setHTML(u),f&&f.remove();var l=document.createElement("img");l.src=D,l.style.width="20px",l.style.height="20px",f=new b.a.Marker({element:l}).setLngLat(C.features[0].geometry.coordinates).setPopup(p).addTo(d),C.features[0].properties.bearing=Object(y["bearing"])(Object(y["point"])(e),Object(y["point"])(t)),d.getSource("drivedRouteSource").setData(P),M<B?requestAnimationFrame(this.animate):(this.lineFlag=!1,this.drivingFlag=!1),this.counter=this.counter+1}},reset:function(){this.lnglatArr=[],this.lineFlag&&(C.features[0].geometry.coordinates=[],H.features[0].geometry.coordinates=[],P.features[0].geometry.coordinates=[],d.getSource("pointSource")&&d.getSource("pointSource").setData(C),d.getSource("routeSource")&&d.getSource("routeSource").setData(H),d.getSource("drivedRouteSource")&&d.getSource("drivedRouteSource").setData(P),this.counter=0,this.lineFlag=!1,this.drivingFlag=!1,d.getLayer("routeLayer")&&d.removeLayer("routeLayer"),d.getLayer("pointLayer")&&d.removeLayer("pointLayer"),d.getLayer("drivedLayer")&&d.removeLayer("drivedLayer"),f&&f.remove())},handleTime:function(e){var t,o,r,n=0;return t=Math.floor(e/6912e5),o=Math.floor(e%864e5/36e5),r=Math.floor(e%864e5%36e5/6e4),n=Math.floor(e%864e5%36e5%6e4/1e3),"".concat(t,"天").concat(o,"小时").concat(r,"分").concat(n,"秒")}},mounted:function(){this.init()}}),I=R,J=(o("e81e"),Object(i["a"])(I,v,m,!1,null,"53041c0b",null)),N=J.exports;r["a"].use(h["a"]);var T=[{path:"/",name:"Home",component:N},{path:"/about",name:"About",component:function(){return o.e("about").then(o.bind(null,"f820"))}}],V=new h["a"]({routes:T}),X=V,q=o("2f62");r["a"].use(q["a"]);var Q=new q["a"].Store({state:{},mutations:{},actions:{},modules:{}});b.a.accessToken="pk.eyJ1Ijoid2FuZ3BhbjAyMCIsImEiOiJja3BtZXUxYTIxY3hsMnBueWM0d2R1MXFiIn0.qpMdbcFxFF9Y3wNGzmTZfA",window.mapboxgl=b.a;b.a,o("4e1a");r["a"].config.productionTip=!1,new r["a"]({router:X,store:Q,render:function(e){return e(u)}}).$mount("#app")},e81e:function(e,t,o){"use strict";o("a581")}});
//# sourceMappingURL=app.3b463fa0.js.map